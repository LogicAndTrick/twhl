(()=>{var e,t={3310:(e,t,s)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var o=s(1485),l=o.ParserConfiguration.Twhl(),a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Priority=-999},(t=[{key:"ShouldProcess",value:function(e,t){return e instanceof o.Nodes.UnprocessablePlainTextNode||e instanceof o.Nodes.PlainTextNode}},{key:"Process",value:function(e,t,s,n){var i=s.Text;if(s instanceof o.Nodes.UnprocessablePlainTextNode)return i=i.replace(/\x02(\d+)\x03/gim,""),s.Text=i,[s];for(var r=[],l=[],a=/\x02(\d+)\x03/gim,d=a.exec(i);null!=d;)l.push(d),d=a.exec(i);for(var c=0,u=0,h=l;u<h.length;u++){var p=h[u];if(!(p.index<c)){p.index>c&&r.push(new o.Nodes.PlainTextNode(i.substring(c,p.index)));var g=p[1];r.push(new o.Nodes.HtmlNode('<a id="position-'.concat(g,'" data-position="').concat(g,'"></a>'),o.Nodes.PlainTextNode.Empty(),"")),c=p.index+p[0].length}}return c<i.length&&r.push(new o.Nodes.PlainTextNode(i.substring(c))),r}}])&&i(e.prototype,t),s&&i(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,s}();l.Processors.push(new a),window.parser=new o.Parser(l)},3108:()=>{},8248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Colours=void 0;class s{static IsValidColor(e){return!!/^#(?:[0-9A-F]{3}){1,2}$/i.test(e)||s.ColorNames.includes(e.toLowerCase())}}t.Colours=s,s.ColorNames=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]},9799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Element=void 0;t.Element=class{constructor(){this.Priority=0}InScope(e){return null==e||""==e.trim()||this.Scopes.includes(e)}}},1775:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdCodeElement=void 0;const n=s(8210),i=s(2492),r=s(9799),o=s(3232);class l extends r.Element{constructor(){super(),this.Priority=10}Matches(e){return e.Value().startsWith("```")}Consume(e,t,s,r){const l=s.Current();let a=s.Value().substring(3).trimEnd(),d=null;o.PreElement.AllowedLanguages.includes(a.toLowerCase())&&(d=a,a="");let c=[a],u=!1;for(;s.Next();){const e=s.Value().trimEnd();if(e.endsWith("```")){const t=e.substring(0,e.length-3);c.push(t),u=!0;break}c.push(e)}if(!u)return s.SetCurrent(l),null;for(let e=0;e<2;e++){for(;c.length>0&&""==c[0].trim();)c.splice(0,1);c.reverse()}c=c.map((e=>e.replace(/\t/g,"    ")));const h=c.reduce(((e,t)=>{if(0==t.trim().length)return e;const s=t.length-t.trimStart().length;return Math.min(s,e)}),9999);c=c.map((e=>e.substring(Math.min(h,e.length))));const p=new i.UnprocessablePlainTextNode(c.join("\n")),g=`<pre${d&&""!=d.trim()?` class="lang-${d}"`:""}><code>`;return new n.HtmlNode(g,p,"</code></pre>")}}t.MdCodeElement=l},9767:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdColumnsElement=void 0;const n=s(8210),i=s(8931),r=s(9799);class o{constructor(e,t){this.Width=e,this.Content=t}ToHtml(){return`<div class="col-md-${this.Width}">\n${this.Content.ToHtml()}</div>\n`}ToPlainText(){return this.Content.ToPlainText()+"\n\n"}GetChildren(){return[this.Content]}ReplaceChild(e,t){if(0!=e)throw new Error("Argument out of range");this.Content=t}HasContent(){return!0}}class l extends r.Element{Matches(e){return e.Value().startsWith("%%columns=")}Consume(e,t,s,r){const l=s.Current(),a=s.Value().substring(10).split(":").map((e=>{var t;return null!==(t=parseInt(e,10))&&void 0!==t?t:0}));let d=0;for(const e of a){if(!(e>0))return s.SetCurrent(l),null;d+=e}if(12!=d)return s.SetCurrent(l),null;let c=0,u=[];const h=[];for(;s.Next()&&c<a.length;){const n=s.Value().trimEnd();if("%%"==n?(h.push(new o(a[c],e.ParseElements(t,u.join("\n"),r))),u=[],c++):u.push(n),c>=a.length)break}return c!=a.length||u.length>0?(s.SetCurrent(l),null):new n.HtmlNode('<div class="row">',new i.NodeCollection(...h),"</div>")}}t.MdColumnsElement=l},9248:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdHeadingElement=void 0;const n=s(727),i=s(9799);class r{constructor(e,t,s){this.Level=e,this.ID=t,this.Text=s}ToHtml(){return`<h${this.Level} id="${this.ID}">${this.Text.ToHtml()}</h${this.Level}>`}ToPlainText(){const e=this.Text.ToPlainText().replace(/\n/g," ");return e+"\n"+"-".repeat(e.length)}GetChildren(){return[this.Text]}ReplaceChild(e,t){if(0!=e)throw new Error("Argument out of range");this.Text=t}HasContent(){return!0}}class o extends i.Element{Matches(e){const t=e.Value();return t.length>0&&t.startsWith("=")}Consume(e,t,s,i){const l=s.Value().trim(),a=/^(=+)(.*?)=*$/i.exec(l),d=Math.min(6,a[1].length),c=a[2].trim();let u=e.ParseTags(t,c,i,n.TagParseContext.Inline);u=e.RunProcessors(u,t,i);const h=o.GetUniqueAnchor(t,u.ToPlainText());return new r(d,h,u)}static GetUniqueAnchor(e,t){const s=o.name+".IdList",n=e.Get(s,(()=>new Set)),i=t.replace(/[^\da-z?/:@\-._~!$&'()*+,;=]/gi,"_");let r=i,l=1;for(;;){if(!n.has(r))break;l++,r=`${i}_${l}`}return n.add(r),r}}t.MdHeadingElement=o},1214:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdLineElement=void 0;const n=s(8210),i=s(3724),r=s(9799);class o extends r.Element{Matches(e){const t=e.Value().trimEnd();return t.length>=3&&t=="-".repeat(t.length)}Consume(e,t,s,r){const o=new n.HtmlNode("<hr />",i.PlainTextNode.Empty(),"");return o.PlainBefore="---",o}}t.MdLineElement=o},2180:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdListElement=void 0;const n=s(8931),i=s(3724),r=s(727),o=s(9799);class l{constructor(e,...t){this.Tag=e,this.Items=t}ToHtml(){let e="";e+=`<${this.Tag}>\n`;for(const t of this.Items)e+=t.ToHtml();return e+=`</${this.Tag}>\n`,e}ToPlainText(){return this.ToPlainTextPrefixed("")}ToPlainTextPrefixed(e){const t=e+("ol"==this.Tag?"#":"-");let s="";for(const e of this.Items)s+=e.ToPlainTextPrefixed(t);return s}GetChildren(){return[...this.Items]}ReplaceChild(e,t){this.Items[e]=t}HasContent(){return!0}}class a{constructor(e){this.Content=e,this.Subtrees=[]}ToHtml(){let e="<li>";e+=this.Content.ToHtml();for(const t of this.Subtrees)e+=t.ToHtml();return e+="</li>\n",e}ToPlainText(){throw new Error("Invalid operation")}ToPlainTextPrefixed(e){let t=e+" ";t+=this.Content.ToPlainText()+"\n";for(const s of this.Subtrees)t+=s.ToPlainTextPrefixed(e);return t}GetChildren(){return[this.Content,...this.Subtrees]}ReplaceChild(e,t){0==e?this.Content=t:this.Subtrees[e-1]=t}HasContent(){return!0}}class d extends o.Element{static IsUnsortedToken(e){return d.UlTokens.has(e)}static IsSortedToken(e){return d.OlTokens.has(e)}static IsListToken(e){return d.IsUnsortedToken(e)||d.IsSortedToken(e)}static IsValidListItem(e,t){const s=e.length;if(0==s)return 0;let n=0,i=!1;for(let t=0;t<s;t++){const s=e[t];if(!d.IsListToken(s)){if(" "==s){i=!0;break}return 0}n++}return i&&n>0&&n<=t+1?n:0}Matches(e){const t=e.Value().trim();return d.IsValidListItem(t,0)>0}Consume(e,t,s,r){const o=s.Current(),l=new a(i.PlainTextNode.Empty());return this.CreateListItems(l,"",e,t,s,r),0==l.Subtrees.length?(s.SetCurrent(o),null):1==l.Subtrees.length?l.Subtrees[0]:new n.NodeCollection(...l.Subtrees)}CreateListItems(e,t,s,n,i,o){const c=[];do{let u=i.Value().trimEnd();if(!u.startsWith(t)){i.Back();break}if(u=u.substring(t.length),u.length>1&&" "==u[0]&&t.length>0){for(u=u.trimStart();u.endsWith("^");){if(u.endsWith("\\^")){u=u.substring(0,u.length-2)+"^";break}if(!i.Next())break;u=u.substring(0,u.length-1).trim()+"\n"+i.Value().trimStart()}const t=s.ParseTags(n,u.trim(),o,r.TagParseContext.Block);e=new a(t),c.push(e)}else{if(!(u.length>2&&d.IsListToken(u[0])&&" "==u[1]&&null!=e)){i.Back();break}{const r=d.IsSortedToken(u[0])?"ol":"ul",a=new l(r,...this.CreateListItems(e,t+u[0],s,n,i,o));e.Subtrees.push(a)}}}while(i.Next());return c}}t.MdListElement=d,d.UlTokens=new Set(["*","-"]),d.OlTokens=new Set(["#"])},2352:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdPanelElement=void 0;const n=s(4124),i=s(8210),r=s(9799);class o extends r.Element{Matches(e){return e.Value().startsWith("~~~")}Consume(e,t,s,r){const o=s.Current(),l=s.Value().substring(3).trim();let a="",d=!1;const c=[];for(;s.Next();){const e=s.Value().trimEnd();if("~~~"==e){d=!0;break}e.length>1&&":"==e[0]?a=e.substring(1).trim():c.push(e)}if(!d)return s.SetCurrent(o),null;let u;u="message"==l?"card-success":"info"==l?"card-info":"warning"==l?"card-warning":"error"==l?"card-danger":"card-default";const h=`<div class="embed-panel card ${u}">`+(""!=a?`<div class="card-header">${n.HtmlHelper.Encode(a)}</div>`:"")+'<div class="card-body">',p=e.ParseElements(t,c.join("\n"),r),g=new i.HtmlNode(h,p,"</div></div>");return g.PlainBefore=""==a?"":a+"\n"+"-".repeat(a.length)+"\n",g}}t.MdPanelElement=o},2606:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdQuoteElement=void 0;const n=s(8210),i=s(9799);class r extends i.Element{Matches(e){const t=e.Value();return t.length>0&&t.startsWith(">")}Consume(e,t,s,i){let r=s.Value();const o=[r.substring(1).trim()];for(;s.Next();){if(r=s.Value().trim(),0==r.length||">"!=r[0]){s.Back();break}o.push(r.substring(1).trim())}const l=o.join("\n").trim(),a=new n.HtmlNode("<blockquote>",e.ParseElements(t,l,i),"</blockquote>");return a.PlainBefore="[quote]\n",a.PlainAfter="\n[/quote]",a}}t.MdQuoteElement=r},4438:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdTableElement=void 0;const n=s(8210),i=s(8931),r=s(2858),o=s(727),l=s(9799);class a{constructor(e,...t){this.Type=e,this.Cells=t}ToHtml(){let e="<tr>\n";for(const t of this.Cells)e+=`<${this.Type}>${t.ToHtml()}</${this.Type}>\n`;return e+="</tr>\n",e}ToPlainText(){let e="",t=!0;for(const s of this.Cells)t||(e+=" | "),e+=s.ToPlainText(),t=!1;return e+="\n",e}GetChildren(){return[...this.Cells]}ReplaceChild(e,t){this.Cells[e]=t}HasContent(){return!0}}class d extends l.Element{Matches(e){const t=e.Value().trimEnd();return t.length>=2&&"|"==t[0]&&("="==t[1]||"-"==t[1])}Consume(e,t,s,r){const o=[];do{const n=s.Value().trimEnd();if(n.length<2||"|"!=n[0]||"="!=n[1]&&"-"!=n[1]){s.Back();break}const i=d.SplitTable(n.substring(2)).map((s=>d.ResolveCell(s,e,t,r)));o.push(new a("="==n[1]?"th":"td",...i))}while(s.Next());return new n.HtmlNode('<table class="table table-bordered">',new i.NodeCollection(...o),"</table>")}static SplitTable(e){const t=[];let s=0,n=0;const i=(e=e.trim()).length;let r;for(r=0;r<i;r++){const o=e[r];"["==o?s++:"]"==o?s--:("|"==o&&0==s||r==i-1)&&(t.push(e.substring(n,r+(r==i-1?1:0)).trim()),n=r+1)}return n<i&&t.push(e.substring(n,r+(r==i-1?1:0)).trim()),t}static ResolveCell(e,t,s,n){const i=/^:ref=([a-z0-9 ]+)$/i.exec(e.trim());if(i){const e=i[1];return new r.RefNode(s,e)}return t.ParseTags(s,e,n,o.TagParseContext.Block)}}t.MdTableElement=d},3232:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreElement=void 0;const n=s(8248),i=s(8210),r=s(2492),o=s(9799);class l extends o.Element{constructor(){super(...arguments),this.Token="pre"}Matches(e){const t=e.Value().trim();return t.length>this.Token.length+1&&t.startsWith("["+this.Token)&&null!=t.match(this.getTokenRegex())}getTokenRegex(){const e=this.Token.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp("\\["+e+"(?:=([a-z ]+))?\\]","i")}Consume(e,t,s,o){var a;const d=s.Current();let c=[],u=s.Value().trim();const h=u.match(this.getTokenRegex());if(!h)return s.SetCurrent(d),null;let p;u=u.substring(h[0].length);let g=!1;if(h[1]){const e=h[1].split(" ");g=e.includes("highlight"),p=null===(a=e.find((e=>"highlight"!=e)))||void 0===a?void 0:a.toLowerCase(),l.AllowedLanguages.includes(p)||(p=void 0)}if(u.endsWith("[/"+this.Token+"]"))c.push(u.substring(0,u.length-(this.Token.length+3)));else{u.length>0&&c.push(u);let e=!1;for(;s.Next();){const t=s.Value().trimEnd();if(t.endsWith("[/"+this.Token+"]")){const s=t.substring(0,t.length-(this.Token.length+3));c.push(s),e=!0;break}c.push(t)}if(!e||0==c.length)return s.SetCurrent(d),null}for(let e=0;e<2;e++){for(;c.length>0&&""==c[0].trim();)c.splice(0,1);c.reverse()}let m=[];if(g){const e=[];let t=0;for(const s of c){if(s.startsWith("@@")){const e=s.match(/^@@(?:(#[0-9a-f]{3}|#[0-9a-f]{6}|[a-z]+|\d+)(?::(\d+))?)?$/im);if(null!=e){let s=1,i="#FF8000";for(let t=1;t<e.length;t++){const r=e[t];n.Colours.IsValidColor(r)?i=r:parseInt(r,10)&&(s=parseInt(r,10))}m.push({firstLine:t,numLines:s,color:i});continue}}t++,e.push(s)}c=e,m.push({firstLine:c.length,numLines:0,color:""});for(let e=0;e<m.length-1;e++){const{firstLine:t,numLines:s,color:n}=m[e],{firstLine:i}=m[e+1];t+s-1>=i&&(m[e]={firstLine:t,numLines:i-t,color:n})}m=m.filter((e=>e.numLines>0))}c=l.FixCodeIndentation(c);const T=m.map((e=>`<div class="line-highlight" style="top: ${e.firstLine}em; height: ${e.numLines}em; background: ${e.color};"></div>`)).join(""),f=new r.UnprocessablePlainTextNode(c.join("\n")),k=`<pre${p&&""!=p.trim()?` class="lang-${p}"`:""}><code>${T}`;return new i.HtmlNode(k,f,"</code></pre>")}static FixCodeIndentation(e){const t=(e=e.map((e=>e.replace(/\t/g,"    ")))).reduce(((e,t)=>{if(0==t.trim().length)return e;const s=t.length-t.trimStart().length;return Math.min(s,e)}),9999);return e.map((e=>e.substring(Math.min(t,e.length))))}}t.PreElement=l,l.AllowedLanguages=["php","dos","bat","cmd","css","cpp","c","c++","cs","ini","json","xml","html","angelscript","javascript","js","plaintext"]},4484:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefElement=void 0;const n=s(3724),i=s(9799);class r extends i.Element{Matches(e){const t=e.Value().trim();return t.length>4&&t.startsWith("[ref=")&&null!=t.match(/\[ref=[a-z0-9 ]+\]/i)}Consume(e,t,s,i){const r=s.Current(),o=[];let l=s.Value().trim();const a=l.match(/\[ref=([a-z0-9 ]+)\]/i);if(!a)return s.SetCurrent(r),null;l=l.substring(a[0].length);const d=a[1];if(l.endsWith("[/ref]"))o.push(l.substring(0,l.length-6));else{l.length>0&&o.push(l);let e=!1;for(;s.Next();){const t=s.Value().trimEnd();if(t.endsWith("[/ref]")){const s=t.substring(0,t.length-6);o.push(s),e=!0;break}o.push(t)}if(!e||0==o.length)return s.SetCurrent(r),null}const c=e.ParseElements(t,o.join("\n").trim(),i);return t.Set(`Ref::${d}`,c),n.PlainTextNode.Empty()}}t.RefElement=r},4124:(e,t)=>{"use strict";function s(e){return e.replace(/\p{Emoji_Presentation}/gmu,(e=>"&#"+e.codePointAt(0)+";"))}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlHelper=void 0;t.HtmlHelper=class{static Encode(e){return s(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))}static UrlEncode(e){return encodeURI(e)}static AttributeEncode(e){return s(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))}}},8094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;t.Lines=class{constructor(e){this.Content=e.split("\n"),this.Index=-1}Back(){this.Index--}Next(){return++this.Index<this.Content.length}Value(){return this.Content[this.Index]}Current(){return this.Index}SetCurrent(e){this.Index=e}}},1539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiRevision=void 0;t.WikiRevision=class{static CreateSlug(e){return e=(e=e.replace(/ /gi,"_")).replace(/[^-$_.+!*'"(),:;<>^{}|~0-9a-z[\]]/gi,"")}}},4042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiRevisionBook=void 0;t.WikiRevisionBook=class{}},8858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiRevisionCredit=void 0;class s{}t.WikiRevisionCredit=s,s.TypeCredit="c",s.TypeArchive="a",s.TypeFull="f"},8210:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlNode=void 0;t.HtmlNode=class{constructor(e,t,s){this.HtmlBefore=e,this.Content=t,this.HtmlAfter=s,this.PlainBefore=this.PlainAfter="",this.IsBlockNode=!1}ToHtml(){return this.HtmlBefore+this.Content.ToHtml()+this.HtmlAfter}ToPlainText(){return this.PlainBefore+this.Content.ToPlainText()+this.PlainAfter}GetChildren(){return[this.Content]}ReplaceChild(e,t){if(0!==e)throw new Error("Index out of range");this.Content=t}HasContent(){return!0}}},6018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataNode=void 0;t.MetadataNode=class{constructor(e,t){this.Key=e,this.Value=t}ToHtml(){return""}ToPlainText(){return""}GetChildren(){return[]}ReplaceChild(e,t){throw new Error("Invalid operation.")}HasContent(){return!1}}},8931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCollection=void 0;t.NodeCollection=class{constructor(...e){this.Nodes=Array.from(e)}ToHtml(){return this.Nodes.map((e=>e.ToHtml())).join("")}ToPlainText(){return this.Nodes.map((e=>e.ToPlainText())).join("")}GetChildren(){return this.Nodes}ReplaceChild(e,t){this.Nodes[e]=t}HasContent(){return this.Nodes.some((e=>e.HasContent()))}}},2501:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeExtensions=void 0;const n=s(1123);class i{static Remove(e,t){const s=e.GetChildren(),r=s.indexOf(t);if(r>=0)return e.ReplaceChild(r,new n.RemovedNode(t)),!0;for(const e of s)if(i.Remove(e,t))return!0;return!1}static Walk(e,t){if(!1===t(e))return!1;for(const s of e.GetChildren())if(!1===i.Walk(s,t))return!1;return!0}static WalkBack(e,t){for(const s of Array.from(e.GetChildren()).reverse())if(!1===i.WalkBack(s,t))return!1;return!1!==t(e)}}t.NodeExtensions=i},3724:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlainTextNode=void 0;const n=s(4124);class i{constructor(e){this.Text=e}static Empty(){return new i("")}ToHtml(){return n.HtmlHelper.Encode(this.Text)}ToPlainText(){return this.Text}GetChildren(){return[]}ReplaceChild(e,t){throw new Error("Invalid operation")}HasContent(){return this.Text&&""!=this.Text.trim()}}t.PlainTextNode=i},2858:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefNode=void 0;const n=s(2492);t.RefNode=class{constructor(e,t){this.Data=e,this.Name=t}GetNode(){return this.Data.Get(`Ref::${this.Name}`,n.UnprocessablePlainTextNode.Empty)}ToHtml(){return this.GetNode().ToHtml()}ToPlainText(){return this.GetNode().ToPlainText()}GetChildren(){return[this.GetNode()]}ReplaceChild(e,t){if(0!=e)throw new Error("Index out of range");this.Data.Set(`Ref::${this.Name}`,t)}HasContent(){return this.GetNode().HasContent()}}},1123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemovedNode=void 0;t.RemovedNode=class{constructor(e){this.OriginalNode=e}ToHtml(){return""}ToPlainText(){return""}GetChildren(){return[]}ReplaceChild(e,t){throw new Error("Unsupported operation.")}HasContent(){return!1}}},2492:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnprocessablePlainTextNode=void 0;const n=s(4124);class i{constructor(e){this.Text=e}static Empty(){return new i("")}static NewLine(){return new i("\n")}ToHtml(){return n.HtmlHelper.Encode(this.Text)}ToPlainText(){return this.Text}GetChildren(){return[]}ReplaceChild(e,t){throw new Error("Invalid operation")}HasContent(){return this.Text&&""!=this.Text.trim()}}t.UnprocessablePlainTextNode=i},7602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseData=void 0;t.ParseData=class{constructor(){this._values={}}Get(e,t){if(this._values[e])return this._values[e];const s=t();return this._values[e]=s,s}Set(e,t){this._values[e]=t}}},6615:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseResult=void 0;const n=s(6018),i=s(8931),r=s(2501);t.ParseResult=class{constructor(){this.Content=new i.NodeCollection}GetMetadata(){const e=[];return r.NodeExtensions.Walk(this.Content,(t=>(t instanceof n.MetadataNode&&e.push({Key:t.Key,Value:t.Value}),!0))),e}ToHtml(){return this.Content.ToHtml()}ToPlainText(){return this.Content.ToPlainText()}}},8066:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;const n=s(8094),i=s(8931),r=s(2501),o=s(3724),l=s(2492),a=s(7602),d=s(6615),c=s(4880),u=s(727),h=s(1965);class p{constructor(e){this.Configuration=e}ParseResult(e,t=""){const s=new a.ParseData;e=e.trim();let n=this.ParseElements(s,e,t);n=this.RunProcessors(n,s,t);const i=new d.ParseResult;return i.Content=n,i}ParseElements(e,t,s){const r=new i.NodeCollection;t=t.replace("\r","");const o=new n.Lines(t),a=(0,h.OrderByDescending)(this.Configuration.Elements.filter((e=>e.InScope(s))),(e=>e.Priority)),d=[];for(;o.Next();){let t=!1;for(const n of a){if(!n.Matches(o))continue;const i=n.Consume(this,e,o,s);if(null!=i){d.length>0&&(r.Nodes.push(p.TrimWhitespace(this.ParseTags(e,d.join("\n").trim(),s,u.TagParseContext.Block))),r.Nodes.push(l.UnprocessablePlainTextNode.NewLine())),d.splice(0,d.length),r.Nodes.push(i),r.Nodes.push(l.UnprocessablePlainTextNode.NewLine()),t=!0;break}}t||d.push(o.Value())}d.length>0&&r.Nodes.push(p.TrimWhitespace(this.ParseTags(e,d.join("\n").trim(),s,u.TagParseContext.Block)));const c=()=>{if(0===r.Nodes.length)return!1;const e=r.Nodes[r.Nodes.length-1];return e instanceof l.UnprocessablePlainTextNode&&(!e.Text||""==e.Text.trim())};for(;c();)r.Nodes.splice(r.Nodes.length-1,1);return p.FlattenNestedNodeCollections(r),p.TrimWhitespace(r)}static TrimWhitespace(e,t=!0,s=!0){const n=[];t&&r.NodeExtensions.Walk(e,(e=>e instanceof i.NodeCollection||!e.HasContent()&&((e instanceof l.UnprocessablePlainTextNode||e instanceof o.PlainTextNode)&&n.push(e),!0))),s&&r.NodeExtensions.WalkBack(e,(e=>e instanceof i.NodeCollection||!e.HasContent()&&((e instanceof l.UnprocessablePlainTextNode||e instanceof o.PlainTextNode)&&n.push(e),!0)));for(const t of n)r.NodeExtensions.Remove(e,t);return e}ParseTags(e,t,s,n){t=t.replace(/\n{3,}/g,"\n\n");const r=new c.State(t),l=new i.NodeCollection,a=(0,h.OrderByDescending)(this.Configuration.Tags.filter((e=>e.InScope(s))),(e=>e.Priority));for(;!r.Done;){let t=r.ScanTo("[");if(t&&""!=t&&l.Nodes.push(new o.PlainTextNode(t)),r.Done)break;const i=r.GetToken();let d=!1;for(const t of a)if(t.Matches(r,i,n)){const i=t.Parse(this,e,r,s,n);if(null!=i){l.Nodes.push(i),d=!0;break}}d||(t=r.Next(),t&&""!=t&&l.Nodes.push(new o.PlainTextNode(t)))}return l}static FlattenNestedNodeCollections(e){if(e instanceof i.NodeCollection){const t=e;for(;t.Nodes.some((e=>e instanceof i.NodeCollection));)t.Nodes=t.Nodes.flatMap((e=>e instanceof i.NodeCollection?e.Nodes:[e]))}else{const t=e.GetChildren();for(let s=0;s<t.length;s++)for(;t[s]instanceof i.NodeCollection&&1==t[s].Nodes.length;){const n=t[s];e.ReplaceChild(s,n.Nodes[0]),t[s]=n.Nodes[0]}}for(const t of e.GetChildren())p.FlattenNestedNodeCollections(t)}RunProcessors(e,t,s){for(const n of(0,h.OrderByDescending)(this.Configuration.Processors,(e=>e.Priority)))e=this.RunProcessor(e,n,t,s);return e}RunProcessor(e,t,s,n){if(t.ShouldProcess(e,n)){const r=t.Process(this,s,e,n);return 1==r.length?r[0]:new i.NodeCollection(...r)}const r=e.GetChildren();for(let i=0;i<r.length;i++){const o=r[i],l=this.RunProcessor(o,t,s,n);e.ReplaceChild(i,l)}return e}}t.Parser=p},9278:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserConfiguration=void 0;const n=s(1775),i=s(9767),r=s(9248),o=s(1214),l=s(2180),a=s(2352),d=s(2606),c=s(4438),u=s(3232),h=s(4484),p=s(8520),g=s(2925),m=s(5515),T=s(2203),f=s(4081),k=s(7896),x=s(4504),P=s(9574),b=s(584),w=s(8203),v=s(855),C=s(5167),N=s(9252),y=s(2762),E=s(4691),A=s(1524),S=s(2277),M=s(439),I=s(3892),_=s(4341),W=s(420),O=s(9667),H=s(2276),j=s(8397),$=s(4780),B=s(7595),L=s(4288),R=s(92);class V{constructor(){this.Elements=[],this.Tags=[],this.Processors=[]}static Twhl(){const e=new V;e.Tags.push(new M.Tag("b","strong").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("i","em").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("u","span","underline").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("s","span","strikethrough").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("green","span","green").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("blue","span","blue").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("red","span","red").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("purple","span","purple").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("yellow","span","yellow").WithScopes("inline","excerpt")),e.Tags.push(new N.PreTag),e.Tags.push(new M.Tag("h","h3").WithBlock(!0)),e.Tags.push((new v.LinkTag).WithScopes("excerpt")),e.Tags.push((new v.LinkTag).WithScopes("excerpt").WithToken("email")),e.Tags.push(new y.QuickLinkTag),e.Tags.push(new B.WikiLinkTag),e.Tags.push(new j.WikiFileTag),e.Tags.push(new w.ImageTag),e.Tags.push((new w.ImageTag).WithToken("simg").WithBlock(!1));const t=new $.WikiImageTag;return t.TwhlBehaviour=!0,e.Tags.push(t),e.Tags.push(new R.YoutubeTag),e.Tags.push(new L.WikiYoutubeTag),e.Tags.push(new I.VaultEmbedTag),e.Tags.push(new E.QuoteTag),e.Tags.push((new b.FontTag).WithScopes("inline","excerpt")),e.Tags.push((new O.WikiCategoryTag).WithScopes("inline","excerpt")),e.Tags.push((new W.WikiBookTag).WithScopes("inline","excerpt")),e.Tags.push((new H.WikiCreditTag).WithScopes("inline","excerpt")),e.Tags.push((new _.WikiArchiveTag).WithScopes("inline","excerpt")),e.Tags.push((new S.SpoilerTag).WithScopes("inline","excerpt")),e.Tags.push((new x.CodeTag).WithScopes("excerpt")),e.Elements.push(new n.MdCodeElement),e.Elements.push(new u.PreElement),e.Elements.push(new r.MdHeadingElement),e.Elements.push(new o.MdLineElement),e.Elements.push(new d.MdQuoteElement),e.Elements.push(new l.MdListElement),e.Elements.push(new c.MdTableElement),e.Elements.push(new a.MdPanelElement),e.Elements.push(new i.MdColumnsElement),e.Elements.push(new h.RefElement),e.Processors.push(new g.MarkdownTextProcessor),e.Processors.push(new p.AutoLinkingProcessor),e.Processors.push(new T.SmiliesProcessor("https://twhl.info/images/smilies/{0}.png").AddTwhl()),e.Processors.push(new f.TrimWhitespaceAroundBlockNodesProcessor),e.Processors.push(new m.NewLineProcessor),e}static Snarkpit(){const e=new V;e.Tags.push(new M.Tag("b","strong").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("i","em").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("u","span","underline").WithScopes("inline","excerpt")),e.Tags.push(new M.Tag("s","span","strikethrough").WithScopes("inline","excerpt")),e.Tags.push(new N.PreTag),e.Tags.push(new M.Tag("center","div","text-center").WithBlock(!0)),e.Tags.push(new k.AlignTag),e.Tags.push(new C.ListTag),e.Tags.push((new v.LinkTag).WithScopes("excerpt")),e.Tags.push((new v.LinkTag).WithScopes("excerpt").WithToken("email")),e.Tags.push(new y.QuickLinkTag),e.Tags.push(new w.ImageTag),e.Tags.push((new w.ImageTag).WithToken("simg").WithBlock(!1)),e.Tags.push(new $.WikiImageTag),e.Tags.push(new R.YoutubeTag),e.Tags.push(new L.WikiYoutubeTag),e.Tags.push(new E.QuoteTag),e.Tags.push(new P.ColorTag),e.Tags.push(new A.SizeTag),e.Tags.push((new S.SpoilerTag).WithScopes("inline","excerpt")),e.Elements.push(new n.MdCodeElement);const t=new u.PreElement;return t.Token="code",e.Elements.push(t),e.Elements.push(new r.MdHeadingElement),e.Elements.push(new o.MdLineElement),e.Elements.push(new d.MdQuoteElement),e.Elements.push(new l.MdListElement),e.Elements.push(new c.MdTableElement),e.Elements.push(new a.MdPanelElement),e.Elements.push(new i.MdColumnsElement),e.Elements.push(new h.RefElement),e.Processors.push(new g.MarkdownTextProcessor),e.Processors.push(new p.AutoLinkingProcessor),e.Processors.push(new T.SmiliesProcessor("https://snarkpit.net/images/smilies/{0}.gif").AddSnarkpit()),e.Processors.push(new f.TrimWhitespaceAroundBlockNodesProcessor),e.Processors.push(new m.NewLineProcessor),e}}t.ParserConfiguration=V},8520:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoLinkingProcessor=void 0;const n=s(4124),i=s(8210),r=s(3724);t.AutoLinkingProcessor=class{constructor(){this.Priority=9}ShouldProcess(e,t){return e instanceof r.PlainTextNode&&(e.Text.includes("http")||e.Text.includes("@"))}Process(e,t,s,o){const l=s.Text,a=[],d=[],c=/(?<=^|\s)(?<url>https?:\/\/[^\][""\s]+)(?=\s|$)/gi;let u=c.exec(l);for(;null!=u;)d.push(u),u=c.exec(l);const h=/(?<=^|\s)(?<email>[^\][""\s@]+@[^\][""\s@]+\.[^\][""\s@]+)(?=\s|$)/gi;let p=h.exec(l);for(;null!=p;)d.push(p),p=h.exec(l);d.sort(((e,t)=>e.index-t.index));let g=0;for(const e of d)if(!(e.index<g)){if(e.index>g&&a.push(new r.PlainTextNode(l.substring(g,e.index))),e.groups.url){const t=e.groups.url;a.push(new i.HtmlNode(`<a href="${n.HtmlHelper.AttributeEncode(t)}">`,new r.PlainTextNode(t),"</a>"))}else if(e.groups.email){const t=e.groups.email;a.push(new i.HtmlNode(`<a href="mailto:${n.HtmlHelper.AttributeEncode(t)}">`,new r.PlainTextNode(t),"</a>"))}g=e.index+e[0].length}return g<l.length&&a.push(new r.PlainTextNode(l.substring(g))),a}}},2925:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownTextProcessor=void 0;const n=s(8210),i=s(8931),r=s(3724),o=s(2492),l=s(1965);class a{constructor(){this.Priority=10}ShouldProcess(e,t){return e instanceof r.PlainTextNode&&(0,l.IndexOfAny)(e.Text,a.Tokens)>=0}static GetTokenIndex(e){return a.Tokens.indexOf(e)}static IsStartBreakChar(e){return a.StartBreakChars.includes(e)}static IsEndBreakChar(e){return a.StartBreakChars.includes(e)||a.ExtraEndBreakChars.includes(e)||a.Tokens.includes(e)}static ParseToken(e,t,s,r){r.endPosition=-1;const l=t[s],d=a.GetTokenIndex(l);if(0!=e[d])return null;const c=t.indexOf(l,s+1);if(c<=s+1)return null;if(t.substring(s,c).indexOf("\n")>=0)return null;if(!((c+1==t.length||a.IsEndBreakChar(t[c+1]))&&""!=t[c-1].trim()))return null;const u=t.substring(s+1,c);let h;if(e[d]=1,"`"==l)h=new o.UnprocessablePlainTextNode(u);else{const t=a.ParseTokens(e,u);h=1==t.length?t[0]:new i.NodeCollection(...t)}e[d]=0,r.endPosition=c;const p=new n.HtmlNode(a.OpenTags[d],h,a.CloseTags[d]);return p.PlainBefore=l,p.PlainAfter=l,p}static ParseTokens(e,t){const s=[];let n=0,i=0;for(;;){const o=(0,l.IndexOfAny)(t,a.Tokens,i);if(o<0)break;if(!((0==o||a.IsStartBreakChar(t[o-1]))&&o+1<t.length&&""!=t[o+1].trim())){i=o+1;continue}const d={endPosition:-1},c=a.ParseToken(e,t,o,d);null==c?i=o+1:(n<o&&s.push(new r.PlainTextNode(t.substring(n,o))),s.push(c),i=n=d.endPosition+1)}return n<t.length&&s.push(new r.PlainTextNode(t.substring(n))),s}Process(e,t,s,n){const i=s.Text,r=[];if((0,l.IndexOfAny)(i,a.Tokens,0)<0)return r.push(s),r;const o=a.Tokens.map((()=>0));for(const e of a.ParseTokens(o,i))r.push(e);return r}}t.MarkdownTextProcessor=a,a.Tokens=Array.from("`*/_~"),a.OpenTags=["<code>","<strong>","<em>",'<span class="underline">','<span class="strikethrough">'],a.CloseTags=["</code>","</strong>","</em>","</span>","</span>"],a.StartBreakChars=Array.from("!^()+=[]{}\"'<>?,. \t\r\n"),a.ExtraEndBreakChars=Array.from(":;")},5515:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewLineProcessor=void 0;const n=s(8210),i=s(3724),r=s(2492);t.NewLineProcessor=class{constructor(){this.Priority=1}ShouldProcess(e,t){return e instanceof i.PlainTextNode&&(e.Text.includes("\n")||e.Text.includes("<br>"))}Process(e,t,s,o){let l=s.Text;l=l.replace(/ *<br> */g,"\n");const a=[],d=l.split("\n");for(let e=0;e<d.length;e++){const t=d[e];a.push(new i.PlainTextNode(t)),e<d.length-1&&a.push(new n.HtmlNode("<br/>",r.UnprocessablePlainTextNode.NewLine(),""))}return a}}},2203:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmiliesProcessor=void 0;const n=s(4124),i=s(8210),r=s(3724),o=s(2492),l=s(1965);class a{constructor(e,t){this.Name=e,this.Tokens=t}GetMatchingToken(e,t){for(const s of this.Tokens)if(e.indexOf(s,t)==t){if(t+s.length<e.length-1&&""!=e[t+s.length].trim())continue;return s}return null}}class d{constructor(e){this.Priority=5,this.UrlFormatString=e,this._definitions=[],this._initialised=!1}ShouldProcess(e,t){return e instanceof r.PlainTextNode&&this._definitions.length>0}Process(e,t,s,a){this._initialised||(this._tokenStarts=new Set(this._definitions.flatMap((e=>e.Tokens)).map((e=>e[0]))),this._initialised=!0);const c=[],u=s.Text;let h=0,p=-1,g=0;for(;p+1<u.length&&(p=(0,l.IndexOfAny)(u,this._tokenStarts,p+1))>=0;){if(g>d.MaxSmilies){c.push(new i.HtmlNode('<em class="text-danger">',new o.UnprocessablePlainTextNode(" [warning: too many smilies in post] "),"</em>"));break}if(0!=p&&""!=u[p-1].trim())continue;let e=null,t=null;for(const s of this._definitions)if(t=s.GetMatchingToken(u,p),null!=t){e=s;break}if(null==e)continue;if(p+t.length<u.length-1&&""!=u[p+t.length].trim())continue;h<p&&c.push(new r.PlainTextNode(u.substring(h,p)));const s=n.HtmlHelper.AttributeEncode((0,l.Template)(this.UrlFormatString,{0:e.Name})),a=n.HtmlHelper.AttributeEncode(t),m=new i.HtmlNode(`<img class="smiley" src="${s}" alt="${a}" />`,r.PlainTextNode.Empty(),"");m.PlainBefore=t,c.push(m),h=p+t.length,p+=t.length,g++}return h<u.length&&c.push(new r.PlainTextNode(u.substring(h))),c}Add(e,...t){return this._definitions.push(new a(e,t)),this._initialised=!1,this}AddTwhl(){return this.Add("aggrieved",":aggrieved:"),this.Add("aghast",":aghast:"),this.Add("angry",":x",":-x",":angry:"),this.Add("badass",":badass:"),this.Add("confused",":confused:"),this.Add("cry",":cry:"),this.Add("cyclops",":cyclops:"),this.Add("lol",":lol:"),this.Add("frown",":|",":-|",":frown:"),this.Add("furious",":furious:"),this.Add("glad",":glad:"),this.Add("heart",":heart:"),this.Add("grin",":D",":-D",":grin:"),this.Add("nervous",":nervous:"),this.Add("nuke",":nuke:"),this.Add("nuts",":nuts:"),this.Add("quizzical",":quizzical:"),this.Add("rollseyes",":roll:",":rollseyes:"),this.Add("sad",":(",":-(",":sad:"),this.Add("smile",":)",":-)",":smile:"),this.Add("surprised",":o",":-o",":surprised:"),this.Add("thebox",":thebox:"),this.Add("thefinger",":thefinger:"),this.Add("tired",":tired:"),this.Add("tongue",":P",":-P",":tongue:"),this.Add("toocool",":cool:"),this.Add("unsure",":\\",":-\\",":unsure:"),this.Add("biggrin",":biggrin:"),this.Add("wink",";)",";-)",":wink:"),this.Add("zonked",":zonked:"),this.Add("sarcastic",":sarcastic:"),this.Add("combine",":combine:",":elite:"),this.Add("gak",":gak:"),this.Add("animehappy",":^_^:"),this.Add("pwnt",":pwned:"),this.Add("target",":target:"),this.Add("ninja",":ninja:"),this.Add("hammer",":hammer:"),this.Add("pirate",":pirate:",":yar:"),this.Add("walter",":walter:"),this.Add("plastered",":plastered:"),this.Add("bigmouth",":zomg:"),this.Add("brokenheart",":heartbreak:"),this.Add("ciggiesmilie",":ciggie:"),this.Add("combines",":combines:"),this.Add("crowbar",":crowbar:"),this.Add("death",":death:"),this.Add("freeman",":freeman:"),this.Add("hecu",":hecu:"),this.Add("nya",":nya:"),this}AddSnarkpit(){return this.Add("icon_biggrin",":D"),this.Add("sailor",":sailor:"),this.Add("icon_smile",":)",":-)"),this.Add("dorky",":geek:"),this.Add("sad0019",":("),this.Add("icon_eek",":-o"),this.Add("grenade",":grenade:"),this.Add("confused",":confused:"),this.Add("icon_cool","8-)"),this.Add("kitty",":k1tt3h:"),this.Add("laughing",":lol:"),this.Add("leper",":leper:"),this.Add("mad",":mad:"),this.Add("tongue0010",":p"),this.Add("popcorn",":popcorn:"),this.Add("icon_redface",":oops:"),this.Add("icon_cry",":cry:"),this.Add("icon_twisted",":evil:"),this.Add("rolleye0011",":roll:"),this.Add("shocked",":scream:"),this.Add("icon_wink",";)"),this.Add("dead",":dead:"),this.Add("pimp",":pimp:"),this.Add("beerchug",":beer:"),this.Add("chainsaw",":chainsaw:"),this.Add("arse",":moonie:"),this.Add("angel",":angel:"),this.Add("bday",":bday:"),this.Add("clap",":clap:"),this.Add("computer",":computer:"),this.Add("crash",":pccrash:"),this.Add("dizzy",":dizzy:"),this.Add("dodgy",":naughty:"),this.Add("drink",":drink:"),this.Add("facelick",":lick:"),this.Add("frown",">:("),this.Add("heee",":hee:"),this.Add("imwithstupid",":imwithstupid:"),this.Add("jawdrop",":jawdrop:"),this.Add("king",":king:"),this.Add("ladysman",":ladysman:"),this.Add("mrT",":mrt:"),this.Add("nurse",":nurse:"),this.Add("outtahere",":outtahere:"),this.Add("aaatrigger",":aaatrigger:"),this.Add("repuke",":repuke:"),this.Add("rofl",":rofl:"),this.Add("rolling",":rolling2:"),this.Add("santa",":santa:"),this.Add("smash",":smash:"),this.Add("toilet",":toilet:"),this.Add("44","~o)"),this.Add("wavey",":wavey:"),this.Add("upyours",":stfu:"),this.Add("fart",":fart:"),this.Add("trout",":trout:"),this.Add("ar15firing",":machinegun:"),this.Add("microwave",":microwave:"),this.Add("guillotine",":guillotine:"),this.Add("poke",":poke:"),this.Add("sniper",":sniper:"),this.Add("monkee",":monkee:"),this.Add("bandit",":gringo:"),this.Add("wtf",":wtf:"),this.Add("azelito",":azelito:"),this.Add("crate",":crate:"),this.Add("argh",":-&"),this.Add("swear",":swear:"),this.Add("rocketwhore",":launcher:"),this.Add("skull",":skull:"),this.Add("munky",":munky:"),this.Add("evilgrin",":E"),this.Add("banghead",":brickwall:"),this.Add("wcc",":wcc:"),this.Add("smiley_sherlock",":sherlock:"),this.Add("nag",":nag:"),this.Add("rolling_eyes",":rolling:"),this.Add("angryfire",":flame:"),this.Add("character",":ghost:"),this.Add("character0007",":pirate:"),this.Add("indifferent0016",":zzz:"),this.Add("indifferent0002",":|"),this.Add("love0012",":love:"),this.Add("rolleye0006",":lookup:"),this.Add("sad0006",";("),this.Add("scared0005",":scared:"),this.Add("flail",":flail:"),this.Add("emot-cowjump",":cowjump:"),this.Add("emot-eng101",":teach:"),this.Add("uncertain",":uncertain:"),this.Add("1sm071potstir",":stirring:"),this.Add("thumbs_up",":thumbsup:"),this.Add("happy_open",":happy:"),this.Add("snark_topic_icon",":snark:"),this}}t.SmiliesProcessor=d,d.MaxSmilies=100},4081:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrimWhitespaceAroundBlockNodesProcessor=void 0;const n=s(8210),i=s(8931),r=s(3724),o=s(2492);t.TrimWhitespaceAroundBlockNodesProcessor=class{constructor(){this.Priority=20}ShouldProcess(e,t){return e instanceof i.NodeCollection}Process(e,t,s,i){const l=s,a=[];let d=!1;for(let s=0;s<l.Nodes.length;s++){let c=l.Nodes[s];const u=s<l.Nodes.length-1?l.Nodes[s+1]:null;if(c instanceof r.PlainTextNode){let e=c.Text;d&&(e=e.trimStart()),u instanceof n.HtmlNode&&u.IsBlockNode&&(e=e.trimEnd()),c.Text=e}c=e.RunProcessor(c,this,t,i),c instanceof n.HtmlNode&&c.IsBlockNode?(d=!0,a.push(o.UnprocessablePlainTextNode.NewLine()),a.push(c),a.push(o.UnprocessablePlainTextNode.NewLine())):(d=!1,a.push(c))}return a}}},4880:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;t.State=class{constructor(e){this.Text=e,this.Index=0}get Length(){return this.Text.length}get Done(){return this.Index>=this.Length}ScanTo(e,t=!1){let s=t?this.Text.toLowerCase().indexOf(e.toLowerCase(),this.Index):this.Text.indexOf(e,this.Index);s<0&&(s=this.Length);const n=this.Text.substring(this.Index,s);return this.Index=s,n}SkipWhitespace(){for(;this.Index<this.Length&&""==this.Text[this.Index].trim();)this.Index++}PeekTo(e){const t=this.Text.indexOf(e,this.Index);return t<0?null:this.Text.substring(this.Index,t)}Seek(e,t){this.Index=t?e:this.Index+e}Peek(e){return this.Index+e>this.Length&&(e=this.Length-this.Index),this.Text.substring(this.Index,this.Index+e)}Next(){return this.Index>=this.Length?"\0":this.Text[this.Index++]}GetToken(){if(this.Done||"["!=this.Text[this.Index])return null;let e=!1,t="";for(let s=this.Index+1;s<Math.min(this.Index+10,this.Length);s++){const n=this.Text[s];if(" "==n||"="==n||"]"==n){e=t.length>0;break}t+=n}return e?t.toLowerCase():null}}},727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagParseContext=void 0,function(e){e[e.Block=0]="Block",e[e.Inline=1]="Inline"}(t.TagParseContext||(t.TagParseContext={}))},7896:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignTag=void 0;const n=s(8210),i=s(439);class r extends i.Tag{constructor(){super(),this.Token="align",this.Element="div",this.MainOption="align",this.Options=["align"],this.AllOptionsInMain=!0,this.IsBlock=!0}FormatResult(e,t,s,i,o,l){let a="<"+this.Element,d=(this.ElementClass||"")+" ";o.align&&r.IsValidAlign(o.align)&&(d+="text-"+r.ConvertAlign(o.align)),a+=' class="'+d.trim()+'">';const c=e.ParseTags(t,l,i,this.TagContext()),u="</"+this.Element+">",h=new n.HtmlNode(a,c,u);return h.IsBlockNode=!0,h}static IsValidAlign(e){return"left"==e||"right"==e||"center"==e}static ConvertAlign(e){return"left"==e?"start":"right"==e?"end":"center"}}t.AlignTag=r},4504:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeTag=void 0;const n=s(8210),i=s(2492),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="code",this.Element="code"}FormatResult(e,t,s,r,o,l){return new n.HtmlNode("<code>",new i.UnprocessablePlainTextNode(l),"</code>")}}t.CodeTag=o},9574:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorTag=void 0;const n=s(8248),i=s(8210),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="color",this.Element="span",this.MainOption="color",this.Options=["color"],this.AllOptionsInMain=!0}FormatResult(e,t,s,r,o,l){let a="<"+this.Element;null!=this.ElementClass&&(a+=' class="'+this.ElementClass+'"'),(o.color||o.colour)&&(a+=' style="',o.color&&n.Colours.IsValidColor(o.color)?a+="color: "+o.color+"; ":o.colour&&n.Colours.IsValidColor(o.colour)&&(a+="color: "+o.colour+"; "),a=a.trimEnd()+'"'),a+=">";const d=e.ParseTags(t,l,r,this.TagContext()),c="</"+this.Element+">";return new i.HtmlNode(a,d,c)}}t.ColorTag=o},584:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontTag=void 0;const n=s(8248),i=s(8210),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="font",this.Element="span",this.MainOption="color",this.Options=["color","colour","size"]}FormatResult(e,t,s,r,l,a){let d="<"+this.Element;null!=this.ElementClass&&(d+=' class="'+this.ElementClass+'"'),(l.color||l.colour||l.size)&&(d+=' style="',l.color&&n.Colours.IsValidColor(l.color)?d+="color: "+l.color+"; ":l.colour&&n.Colours.IsValidColor(l.colour)&&(d+="color: "+l.colour+"; "),l.size&&o.IsValidSize(l.size)&&(d+="font-size: "+l.size+"px; "),d=d.trimEnd()+'"'),d+=">";const c=e.ParseTags(t,a,r,this.TagContext()),u="</"+this.Element+">";return new i.HtmlNode(d,c,u)}static IsValidSize(e){var t;const s=null!==(t=parseInt(e,10))&&void 0!==t?t:0;return s>=6&&s<=40}}t.FontTag=o},8203:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageTag=void 0;const n=s(4124),i=s(8210),r=s(3724),o=s(439);class l extends o.Tag{constructor(){super(),this.Token="img",this.Element="div",this.MainOption="url",this.Options=["url"],this.IsBlock=!0}FormatResult(e,t,s,o,l,a){let d=a;l.url&&(d=l.url),d.match(/^([a-z]{2,10}:\/\/)/i)||(d="http://"+d),d=n.HtmlHelper.AttributeEncode(d);const c=["embedded","image"];null!=this.ElementClass&&c.push(this.ElementClass);let u=this.Element;this.IsBlock?s.SkipWhitespace():(u="span",c.push("inline"));const h=`<${u} class="${c.join(" ")}"><span class="caption-panel"><img class="caption-body" src="${d}" alt="User posted image" />`,p=`</span></${u}>`,g="div"==u?"\n":"",m=new i.HtmlNode(h,r.PlainTextNode.Empty(),p);return m.PlainBefore=`${g}[User posted image]${g}`,m.IsBlockNode="div"==u,m}Validate(e,t){let s=t;return e.url&&(s=e.url),!s.includes("<script")&&null!=s.match(/^([a-z]{2,10}:\/\/)?([^\]"\n ]+?)$/i)}}t.ImageTag=l},855:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkTag=void 0;const n=s(4124),i=s(8210),r=s(2492),o=s(439);class l extends o.Tag{constructor(){super(),this.Token="url",this.Element="a",this.MainOption="url",this.Options=["url"]}FormatResult(e,t,s,o,l,a){let d=a;l.url&&(d=l.url),"email"==this.Token?d="mailto:"+d:d.match(/^([a-z]{2,10}:\/\/)/i)||(d="http://"+d),d=n.HtmlHelper.AttributeEncode(d);const c=[];null!=this.ElementClass&&c.push(this.ElementClass);const u=`<${this.Element} `+(c.length>0?`class="${c.join(" ")}" `:"")+`href="${d}">`,h=`</${this.Element}>`,p=l.url?e.ParseTags(t,a,o,this.TagContext()):new r.UnprocessablePlainTextNode(a);return new i.HtmlNode(u,p,h)}Validate(e,t){let s=t;return e.url&&(s=e.url),!s.includes("<script")&&null!=s.match(/^([a-z]{2,10}:\/\/)?([^\]"\n ]+?)$/i)}}t.LinkTag=l},5167:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListTag=void 0;const n=s(8210),i=s(8931),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="list",this.Element="ul",this.IsBlock=!0}Validate(e,t){const s=t.split("[*]").map((e=>e.trim())).filter((e=>(null==e?void 0:e.length)>0));return super.Validate(e,t)&&s.length>0}FormatResult(e,t,s,r,o,l){let a="<"+this.Element;null!=this.ElementClass&&(a+=' class="'+this.ElementClass+'"'),a+=">\n";const d=new i.NodeCollection,c=l.split("[*]").map((e=>e.trim())).filter((e=>(null==e?void 0:e.length)>0));for(const s of c){const i=new n.HtmlNode("<li>",e.ParseTags(t,s,r,this.TagContext()),"</li>\n");i.PlainBefore="* ",i.PlainAfter="\n",d.Nodes.push(i)}const u="</"+this.Element+">",h=new n.HtmlNode(a,d,u);return h.IsBlockNode=!0,h}}t.ListTag=o},9252:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreTag=void 0;const n=s(3232),i=s(8210),r=s(2492),o=s(439);class l extends o.Tag{constructor(){super(),this.Token="pre",this.Element="pre",this.IsBlock=!0}FormatResult(e,t,s,o,l,a){let d="<"+this.Element;null!=this.ElementClass&&(d+=' class="'+this.ElementClass+'"'),d+="><code>";const c="</code></"+this.Element+">";let u=a.split("\n");for(let e=0;e<2;e++){for(;u.length>0&&""==u[0].trim();)u.splice(0,1);u.reverse()}u=n.PreElement.FixCodeIndentation(u),a=u.join("\n");const h=new i.HtmlNode(d,new r.UnprocessablePlainTextNode(a),c);return h.IsBlockNode=!0,h}}t.PreTag=l},2762:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickLinkTag=void 0;const n=s(4124),i=s(8210),r=s(2492),o=s(439);class l extends o.Tag{constructor(){super(),this.Token=null,this.Element="a",this.MainOption="url",this.Options=["url"]}Matches(e,t,s){let n=e.PeekTo("]");return!(!n||""==n)&&(n=n.substring(1),n.length>0&&!n.includes("\n")&&null!=n.match(/^([a-z]{2,10}:\/\/[^\]]*?)(?:\|([^\]]*?))?/i))}Parse(e,t,s,o,l){var a,d;const c=s.Index;if("["!=s.Next())return s.Seek(c,!0),null;const u=s.ScanTo("]");if("]"!=s.Next())return s.Seek(c,!0),null;const h=u.match(/^([a-z]{2,10}:\/\/[^\]]*?)(?:\|([^\]]*?))?$/i);if(!h)return s.Seek(c,!0),null;let p=h[1];const g=(null===(a=h[2])||void 0===a?void 0:a.length)>0?h[2]:p,m={url:p};if(!this.Validate(m,g))return s.Seek(c,!0),null;p=n.HtmlHelper.AttributeEncode(p);const T=`<${this.Element} href="${p}">`,f=`</${this.Element}>`,k=new r.UnprocessablePlainTextNode(g),x=new i.HtmlNode(T,k,f);return x.PlainAfter=(null===(d=h[2])||void 0===d?void 0:d.length)>0?` (${p})`:"",x}Validate(e,t){let s=t;return e.url&&(s=e.url),!s.includes("<script")&&null!=s.match(/^([a-z]{2,10}:\/\/)?([^\]""\n ]+?)/i)}}t.QuickLinkTag=l},4691:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteTag=void 0;const n=s(8210),i=s(439);class r extends i.Tag{constructor(){super(),this.Token="quote",this.Element="blockquote",this.MainOption="name",this.Options=["name"],this.AllOptionsInMain=!0,this.IsBlock=!0,this.IsNested=!0}FormatResult(e,t,s,i,r,o){let l="<"+this.Element;null!=this.ElementClass&&(l+=' class="'+this.ElementClass+'"'),l+=">",r.name&&(l+='<strong class="quote-name">'+r.name+" said:</strong><br/>");const a="</"+this.Element+">",d=e.ParseTags(t,null==o?void 0:o.trim(),i,this.TagContext()),c=new n.HtmlNode(l,d,a);return c.PlainBefore=(r.name?r.name+" said: ":"")+"[quote]\n",c.PlainAfter="\n[/quote]",c.IsBlockNode=this.IsBlock,c}}t.QuoteTag=r},1524:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeTag=void 0;const n=s(8210),i=s(584),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="size",this.Element="span",this.MainOption="size",this.Options=["size"],this.AllOptionsInMain=!0}FormatResult(e,t,s,r,o,l){let a="<"+this.Element;null!=this.ElementClass&&(a+=' class="'+this.ElementClass+'"'),o.size&&(a+=' style="',o.size&&i.FontTag.IsValidSize(o.size)&&(a+="font-size: "+o.size+"px; "),a=a.trimEnd()+'"'),a+=">";const d=e.ParseTags(t,l,r,this.TagContext()),c="</"+this.Element+">";return new n.HtmlNode(a,d,c)}}t.SizeTag=o},2277:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpoilerTag=void 0;const n=s(8210),i=s(439);class r{constructor(e,t){this.VisibleText=e,this.SpoilerContent=t}ToHtml(){return this.SpoilerContent.ToHtml()}ToPlainText(){return`[${this.VisibleText}](spoiler text)`}GetChildren(){return[this.SpoilerContent]}ReplaceChild(e,t){if(0!=e)throw new Error("Argument out of range");this.SpoilerContent=t}HasContent(){return!0}}class o extends i.Tag{constructor(){super(),this.Token="spoiler",this.Element="span",this.ElementClass="spoiler",this.MainOption="text",this.Options=["text"],this.AllOptionsInMain=!0}FormatResult(e,t,s,i,o,l){let a="Spoiler";o.text&&o.text.length>0&&(a=o.text);let d=`<${this.Element}`;null!=this.ElementClass&&(d+=' class="'+this.ElementClass+'"'),d+=` title="${a}">`;const c=`</${this.Element}>`;return new n.HtmlNode(d,new r(a,e.ParseTags(t,l,i,this.TagContext())),c)}}t.SpoilerTag=o},439:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;const n=s(8210),i=s(727);t.Tag=class{constructor(e="",t="",s=null){this.Priority=0,this.Token=e,this.Element=t,this.ElementClass=s,this.Options=[],this.Scopes=[]}TagContext(){return this.IsBlock?i.TagParseContext.Block:i.TagParseContext.Inline}InScope(e){return!e||""==e.trim()||this.Scopes.includes(e)}Matches(e,t,s){return(null==t?void 0:t.toLowerCase())==this.Token&&(s==i.TagParseContext.Block||!this.IsBlock)}Parse(e,t,s,n,i){const r=s.Index,o=this.Token.length;s.Seek(o+1,!1);let l=s.ScanTo("]").trim();if("]"!=s.Next())return s.Seek(r,!0),null;const a={};if(l.length>0)if("="==l[0]&&this.AllOptionsInMain&&null!=this.MainOption)a[this.MainOption]=l.substring(1);else{"="==l[0]&&(l=this.MainOption+l);const e=/(?=\s|^)\s*([^ ]+?)=([^\s]*)(?=\s|$)(?!=)/gim;let t=e.exec(l);for(;null!=t;){const s=t[1].trim(),n=t[2].trim();a[s]=n,t=e.exec(l)}}if(this.IsNested){let i=1,l="";for(;!s.Done;){l+=s.ScanTo("[");const r=s.GetToken();if(r.toLowerCase()==this.Token.toLowerCase()&&i++,r.toLowerCase()=="/"+this.Token.toLowerCase()&&s.Peek(o+3).trim()=="[/"+this.Token.toLowerCase()+"]"&&i--,0==i){if(s.Seek(this.Token.length+3,!1),!this.Validate(a,l))break;return this.FormatResult(e,t,s,n,a,l)}l+=s.Next()}return s.Seek(r,!0),console.log(2),null}{const i=s.ScanTo("[/"+this.Token+"]",!0);return s.Peek(o+3).trim()=="[/"+this.Token.toLowerCase()+"]"&&this.Validate(a,i)?(s.Seek(this.Token.length+3,!1),this.FormatResult(e,t,s,n,a,i)):(s.Seek(r,!0),console.log(3),null)}}Validate(e,t){return!0}FormatResult(e,t,s,i,r,o){let l="<"+this.Element;null!=this.ElementClass&&(l+=' class="'+this.ElementClass+'"'),l+=">";const a="</"+this.Element+">",d=e.ParseTags(t,o,i,this.TagContext()),c=new n.HtmlNode(l,d,a);return c.IsBlockNode=this.IsBlock,c}WithScopes(...e){return this.Scopes=e,this}WithToken(e){return this.Token=e,this}WithElement(e){return this.Element=e,this}WithElementClass(e){return this.ElementClass=e,this}WithBlock(e){return this.IsBlock=e,this}}},3892:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VaultEmbedTag=void 0;const n=s(8210),i=s(3724),r=s(727),o=s(439);class l extends o.Tag{constructor(){super(),this.Element="div",this.MainOption="id",this.Options=["id"]}Matches(e,t,s){const n=e.Peek(7),i=e.PeekTo("]");return s==r.TagParseContext.Block&&"[vault:"==n&&(null==i?void 0:i.length)>7&&!i.includes("\n")}Parse(e,t,s,r,o){const l=s.Index;if("[vault"!=s.ScanTo(":")||":"!=s.Next())return s.Seek(l,!0),null;const a=s.ScanTo("]");if("]"!=s.Next())return s.Seek(l,!0),null;const d=parseInt(a,10);if(!d)return s.Seek(l,!0),null;const c=["embedded","vault"];null!=this.ElementClass&&c.push(this.ElementClass),s.SkipWhitespace();const u=`<div class="${c.join(" ")}"><div class="embed-container"><div class="embed-content"><div class="uninitialised" data-embed-type="vault" data-vault-id="${d}">Loading embedded content: Vault Item #${d}`,h=new n.HtmlNode(u,i.PlainTextNode.Empty(),"</div></div></div></div>");return h.PlainBefore=`[TWHL vault item #${d}]`,h.PlainAfter="\n",h.IsBlockNode=!0,h}}t.VaultEmbedTag=l},4341:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiArchiveTag=void 0;const n=s(8858),i=s(6018),r=s(439);class o extends r.Tag{constructor(){super(),this.Token=null,this.Element=""}Matches(e,t,s){const n=e.Peek(9),i=e.PeekTo("]");return"[archive:"==n&&null!=i&&i.length>9&&!i.includes("\n")}Parse(e,t,s,r,o){const l=s.Index;if("["!=s.Next())return s.Seek(l,!0),null;const a=s.ScanTo("]");if("]"!=s.Next())return s.Seek(l,!0),null;const d=new n.WikiRevisionCredit;d.Type=n.WikiRevisionCredit.TypeArchive;const c=a.split("|");for(const e of c){const t=e.split(":"),s=t[0],i=t.length>1?t.slice(1).join(":"):"";switch(s){case"archive":d.Name=i;break;case"description":d.Description=i;break;case"url":d.Url=i;break;case"wayback":d.WaybackUrl=i;break;case"full":d.Type=n.WikiRevisionCredit.TypeFull}}return null==d.WaybackUrl||null==d.Url||d.WaybackUrl.startsWith("http://")||d.WaybackUrl.startsWith("https://")||!parseInt(d.WaybackUrl,10)||(d.WaybackUrl=`https://web.archive.org/web/${d.WaybackUrl}/${d.Url}`),s.SkipWhitespace(),new i.MetadataNode("WikiCredit",d)}}t.WikiArchiveTag=o},420:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiBookTag=void 0;const n=s(4042),i=s(6018),r=s(439);class o extends r.Tag{constructor(){super(),this.Token=null,this.Element=""}Matches(e,t,s){const n=e.Peek(6),i=e.PeekTo("]");return"[book:"==n&&null!=i&&i.length>6&&!i.includes("\n")}Parse(e,t,s,r,o){const l=s.Index;if("["!=s.Next())return s.Seek(l,!0),null;const a=s.ScanTo("]");if("]"!=s.Next())return s.Seek(l,!0),null;const d=new n.WikiRevisionBook,c=a.split("|");for(const e of c){const t=e.split(":"),s=t[0],n=t.length>1?t.slice(1).join(":"):"";switch(s){case"book":d.BookName=n;break;case"chapter":d.ChapterName=n;break;case"chapternumber":d.ChapterNumber=parseInt(n,10)||null;break;case"pagenumber":d.PageNumber=parseInt(n,10)||null}}return s.SkipWhitespace(),new i.MetadataNode("WikiBook",d)}}t.WikiBookTag=o},9667:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiCategoryTag=void 0;const n=s(6018),i=s(439);class r extends i.Tag{constructor(){super(),this.Token=null,this.Element=""}Matches(e,t,s){const n=e.Peek(5),i=e.PeekTo("]");return"[cat:"==n&&null!=i&&i.length>5&&!i.includes("\n")}Parse(e,t,s,i,r){const o=s.Index;if("[cat"!=s.ScanTo(":")||":"!=s.Next())return s.Seek(o,!0),null;const l=s.ScanTo("]");return"]"!=s.Next()?(s.Seek(o,!0),null):(s.SkipWhitespace(),new n.MetadataNode("WikiCategory",l.trim()))}}t.WikiCategoryTag=r},2276:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiCreditTag=void 0;const n=s(8858),i=s(6018),r=s(439);class o extends r.Tag{constructor(){super(),this.Token=null,this.Element=""}Matches(e,t,s){const n=e.Peek(8),i=e.PeekTo("]");return"[credit:"==n&&null!=i&&i.length>8&&!i.includes("\n")}Parse(e,t,s,r,o){const l=s.Index;if("["!=s.Next())return s.Seek(l,!0),null;const a=s.ScanTo("]");if("]"!=s.Next())return s.Seek(l,!0),null;const d=new n.WikiRevisionCredit;d.Type=n.WikiRevisionCredit.TypeCredit;const c=a.split("|");for(const e of c){const t=e.split(":"),s=t[0],n=t.length>1?t.slice(1).join(":"):"";switch(s){case"credit":d.Description=n;break;case"user":d.UserID=parseInt(n,10)||null;break;case"name":d.Name=n;break;case"url":d.Url=n}}return s.SkipWhitespace(),new i.MetadataNode("WikiCredit",d)}}t.WikiCreditTag=o},8397:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiFileTag=void 0;const n=s(4124),i=s(1539),r=s(8210),o=s(6018),l=s(8931),a=s(3724),d=s(439);class c extends d.Tag{constructor(){super()}static GetTag(e){const t=e.Peek(6),s=e.PeekTo("]");return"[file:"==t&&(null==s?void 0:s.length)>6&&!s.includes("\n")?"file":null}Matches(e,t,s){return null!=c.GetTag(e)}Parse(e,t,s,d,u){var h;const p=s.Index,g=c.GetTag(s);if(s.ScanTo(":")!=`[${g}`||":"!=s.Next())return s.Seek(p,!0),null;const m=s.ScanTo("]");if("]"!=s.Next())return s.Seek(p,!0),null;const T=m.match(/^([^#\]]+?)(?:\|([^\]]*?))?$/i);if(!T)return s.Seek(p,!0),null;const f=T[1],k=(null===(h=T[2])||void 0===h?void 0:h.length)>0?T[2]:f,x=i.WikiRevision.CreateSlug(f),P=n.HtmlHelper.AttributeEncode(`https://twhl.info/wiki/embed/${x}`),b=`<span class="embedded-inline download" data-info="${n.HtmlHelper.AttributeEncode(`https://twhl.info/wiki/embed-info/${x}`)}"><a href="${P}"><span class="fa fa-download"></span> `,w=new l.NodeCollection;return w.Nodes.push(new o.MetadataNode("WikiUpload",f)),w.Nodes.push(new a.PlainTextNode(k)),new r.HtmlNode(b,w,"</a></span>")}}t.WikiFileTag=c},4780:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiImageTag=void 0;const n=s(4124),i=s(1539),r=s(8210),o=s(6018),l=s(8931),a=s(3724),d=s(727),c=s(439);class u extends c.Tag{constructor(){super(),this.TwhlBehaviour=!1,this.Token=null,this.Element="img"}static GetTag(e){for(const t of this.Tags){const s=e.Peek(2+t.length),n=e.PeekTo("]");if(s==`[${t}:`&&(null==n?void 0:n.length)>2+t.length&&!n.includes("\n"))return t}return null}Matches(e,t,s){return null!=u.GetTag(e)}Parse(e,t,s,c,h){const p=s.Index,g=u.GetTag(s);if(s.ScanTo(":")!=`[${g}`||":"!=s.Next())return s.Seek(p,!0),null;const m=s.ScanTo("]");if("]"!=s.Next())return s.Seek(p,!0),null;const T=m.match(/^([^|\]]*?)(?:\|([^\]]*?))?$/i);if(!T)return s.Seek(p,!0),null;const f=new l.NodeCollection,k=T[1],x=T[2]?T[2].trim().split("|"):[];let P=k;if(!k.includes("/")){if(!this.TwhlBehaviour)return s.Seek(p,!0),null;f.Nodes.push(new o.MetadataNode("WikiUpload",k)),P=`https://twhl.info/wiki/embed/${i.WikiRevision.CreateSlug(k)}`}let b=null,w=null,v=!1;const C=["embedded","image"];null!=this.ElementClass&&C.push(this.ElementClass);for(const e of x){const t=e.toLowerCase();u.IsClass(t)?C.push(t):"loop"==t?v=!0:t.length>4&&"url:"==t.substring(0,4)?b=e.substring(4).trim():w=e.trim()}w&&""!=w.trim()||(w=null),"img"==g&&null!=b&&u.ValidateUrl(b)?this.TwhlBehaviour&&!b.match(/^[a-z]{2,10}:\/\//i)&&(f.Nodes.push(new o.MetadataNode("WikiLink",b)),b=`https://twhl.info/wiki/page/${i.WikiRevision.CreateSlug(b)}`):b="";let N="span";h!=d.TagParseContext.Inline||C.includes("inline")||C.push("inline"),C.includes("inline")||(s.SkipWhitespace(),N="div");const y=u.GetEmbedObject(g,P,w,v);if(null!=y&&f.Nodes.push(y),null!=w){const e=new r.HtmlNode('<span class="caption">',new a.PlainTextNode(w),"</span>");e.PlainBefore=" ",f.Nodes.push(e)}const E=`<${N} class="${C.join(" ")}"`+((null==w?void 0:w.length)>0?` title="${n.HtmlHelper.AttributeEncode(w)}"`:"")+">"+(b.length>0?'<a href="'+n.HtmlHelper.AttributeEncode(b)+'">':"")+'<span class="caption-panel">',A="</span>"+(b.length>0?"</a>":"")+`</${N}>`,S=new r.HtmlNode(E,f,A);return S.IsBlockNode="div"==N,S}static GetEmbedObject(e,t,s,i){switch(t=n.HtmlHelper.AttributeEncode(t),e){case"img":{s=null!=s?s:"User posted image";const e=n.HtmlHelper.AttributeEncode(s),i=new r.HtmlNode(`<img class="caption-body" src="${t}" alt="${e}" />`,a.PlainTextNode.Empty(),"");return i.PlainBefore="[Image]",i}case"video":case"audio":{let s="";i&&(s="autoplay loop muted");const n=new r.HtmlNode(`<${e} class="caption-body" src="${t}" playsinline controls ${s}>Your browser doesn't support embedded ${e}.</${e}>`,a.PlainTextNode.Empty(),"");return n.PlainBefore=e.substring(0,1).toUpperCase()+e.substring(1),n}}return null}static ValidateUrl(e){return!e.includes("<script")}static IsClass(e){return u.ValidClasses.includes(e)}}t.WikiImageTag=u,u.Tags=["img","video","audio"],u.ValidClasses=["large","medium","small","thumb","left","right","center","inline"]},7595:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiLinkTag=void 0;const n=s(4124),i=s(1539),r=s(8210),o=s(6018),l=s(8931),a=s(3724),d=s(439);class c extends d.Tag{constructor(){super(),this.Token=null}Matches(e,t,s){const n=e.PeekTo("]]");return(null==n?void 0:n.length)>1&&"["==n[1]&&!n.includes("\n")&&null!=n.substring(2).match(/([^\]]*?)(?:\|([^\]]*?))?/i)}Parse(e,t,s,d,c){const u=s.Index;if("["!=s.Next()||"["!=s.Next())return s.Seek(u,!0),null;const h=s.ScanTo("]]");if("]"!=s.Next()||"]"!=s.Next())return s.Seek(u,!0),null;const p=h.match(/^([^\]]+?)(?:\|([^\]]*?))?$/i);if(!p)return s.Seek(u,!0),null;let g=p[1];const m=p[2]?p[2]:g;let T="";if(g.includes("#")){const e=g.split("#");g=e[0];T="#"+(e.length>1?e.slice(1).join("#"):"").replace(/[^\da-z?/:@\-._~!$&'()*+,;=]/gi,"_")}const f=`<a href="${n.HtmlHelper.AttributeEncode(`https://twhl.info/wiki/page/${i.WikiRevision.CreateSlug(g)}`)+T}">`,k=new l.NodeCollection;return k.Nodes.push(new o.MetadataNode("WikiLink",g)),k.Nodes.push(new a.PlainTextNode(m)),new r.HtmlNode(f,k,"</a>")}}t.WikiLinkTag=c},4288:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WikiYoutubeTag=void 0;const n=s(8210),i=s(3724),r=s(727),o=s(439);class l extends o.Tag{constructor(){super(),this.Token=null,this.Element="div",this.MainOption="id",this.Options=["id"]}Matches(e,t,s){const n=e.Peek(9),i=e.PeekTo("]");return s==r.TagParseContext.Block&&"[youtube:"==n&&null!=i&&i.length>9&&!i.includes("\n")}Parse(e,t,s,r,o){var a,d;const c=s.Index;if("[youtube"!=s.ScanTo(":")||":"!=s.Next())return s.Seek(c,!0),null;const u=s.ScanTo("]");if("]"!=s.Next())return s.Seek(c,!0),null;const h=u.match(/^([^|\]]*?)(?:\|([^\]]*?))?$/i);if(!h)return s.Seek(c,!0),null;const p=h[1],g=null!==(d=null===(a=h[2])||void 0===a?void 0:a.trim().split("|"))&&void 0!==d?d:[];if(!l.ValidateID(p))return s.Seek(c,!0),null;s.SkipWhitespace();let m=null;const T=["embedded","video"];null!=this.ElementClass&&T.push(this.ElementClass);for(const e of g){const t=e.toLowerCase();l.IsClass(t)?T.push(t):m=e.trim()}m&&""!=m.trim()||(m=null);const f=new n.HtmlNode(null!=m?'<span class="caption">':"",new i.PlainTextNode(null!=m?m:""),null!=m?"</span>":"");f.PlainBefore="[YouTube video] ",f.PlainAfter="\n";const k=`<div class="${T.join(" ")}"><div class="caption-panel"><div class="video-container caption-body"><div class="video-content"><div class="uninitialised" data-youtube-id="${p}" style="background-image: url('https://i.ytimg.com/vi/${p}/hqdefault.jpg');"></div></div></div>`,x=new n.HtmlNode(k,f,"</div></div>");return x.IsBlockNode=!0,x}static ValidateID(e){return null!=e.match(/^[a-zA-Z0-9_-]{6,11}$/i)}static IsClass(e){return l.ValidClasses.includes(e)}}t.WikiYoutubeTag=l,l.ValidClasses=["large","medium","small","left","right","center"]},92:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YoutubeTag=void 0;const n=s(8210),i=s(3724),r=s(439);class o extends r.Tag{constructor(){super(),this.Token="youtube",this.Element="div",this.MainOption="id",this.Options=["id"]}FormatResult(e,t,s,r,o,l){let a=l;o.id&&(a=o.id);const d=["embedded","video"];null!=this.ElementClass&&d.push(this.ElementClass);const c=new n.HtmlNode("",i.PlainTextNode.Empty(),"");c.PlainBefore="[YouTube video] ",c.PlainAfter="\n";const u=`<div class="${d.join(" ")}"> <div class="caption-panel">  <div class="video-container caption-body">   <div class="video-content">    <div class="uninitialised" data-youtube-id="${a}" style="background-image: url('https://i.ytimg.com/vi/${a}/hqdefault.jpg');"></div>   </div>  </div>`,h=new n.HtmlNode(u,c,"</div></div>");return h.IsBlockNode=!0,h}Validate(e,t){let s=t;return e.id&&(s=e.id),null!=s.match(/^[a-zA-Z0-9_-]{6,11}$/i)}}t.YoutubeTag=o},1965:(e,t)=>{"use strict";function s(e,t){return Array.from(e).sort(((e,s)=>{const n=t(e),i=t(s);return n<i?-1:n>i?1:0}))}Object.defineProperty(t,"__esModule",{value:!0}),t.Template=t.IndexOfAny=t.OrderByDescending=t.OrderBy=void 0,t.OrderBy=s,t.OrderByDescending=function(e,t){return s(e,t).reverse()},t.IndexOfAny=function(e,t,s=0){let n=-1;for(const i of t){const t=e.indexOf(i,s);t>=0&&(n=n<0?t:Math.min(n,t))}return n},t.Template=function(e,t){return e.replace(/\{(.*?)\}/gi,(function(e,s){return t[s]||""}))}},1485:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Nodes=t.Tags=t.ParserConfiguration=t.Parser=void 0;var n=s(8066);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return n.Parser}});var i=s(9278);Object.defineProperty(t,"ParserConfiguration",{enumerable:!0,get:function(){return i.ParserConfiguration}});const r=s(439),o=s(8210),l=s(6018),a=s(8931),d=s(2501),c=s(3724),u=s(2858),h=s(1123),p=s(2492);t.Tags={Tag:r.Tag},t.Nodes={HtmlNode:o.HtmlNode,MetadataNode:l.MetadataNode,NodeCollection:a.NodeCollection,NodeExtensions:d.NodeExtensions,PlainTextNode:c.PlainTextNode,RefNode:u.RefNode,RemovedNode:h.RemovedNode,UnprocessablePlainTextNode:p.UnprocessablePlainTextNode}}},s={};function n(e){var i=s[e];if(void 0!==i)return i.exports;var r=s[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,s,i,r)=>{if(!s){var o=1/0;for(c=0;c<e.length;c++){for(var[s,i,r]=e[c],l=!0,a=0;a<s.length;a++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](s[a])))?s.splice(a--,1):(l=!1,r<o&&(o=r));if(l){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,i,r]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={283:0,252:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var i,r,[o,l,a]=s,d=0;if(o.some((t=>0!==e[t]))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var c=a(n)}for(t&&t(s);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},s=self.webpackChunk=self.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.O(void 0,[252],(()=>n(3310)));var i=n.O(void 0,[252],(()=>n(3108)));i=n.O(i)})();